(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"3glr":function(t,e,r){"use strict";r.r(e),r.d(e,"EntryModule",function(){return A});var i=r("3Pt+"),n=r("tyNb"),s=r("lJxs"),a=r("fXoL"),c=r("l7P3");let o=(()=>{class t{constructor(t,e){this.store=t,this.router=e}canActivate(t,e){return this.store.select("auth").pipe(Object(s.a)(t=>{if(t){if(t.user)return!0}else if(null===localStorage.getItem("userdata"))return this.router.createUrlTree(["/auth"])}))}}return t.\u0275fac=function(e){return new(e||t)(a.Xb(c.b),a.Xb(n.b))},t.\u0275prov=a.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=r("6TQ8"),b=r("2X5n");const l=[{path:"",component:b.a,canActivate:[o],children:[{path:"all",component:b.a}]}];let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({providers:[p.a],imports:[[n.e.forChild(l)],n.e]}),t})();var u=r("tk/3"),h=r("9jGm"),j=r("561o");const y=Object(c.h)({entries:[],totalEntries:0},Object(c.i)(j.i,(t,e)=>({entries:[],totalEntries:0})),Object(c.i)(j.j,(t,e)=>Object.assign(Object.assign({},t),{entries:[...e.entries],totalEntries:e.totalEntries})),Object(c.i)(j.d,(t,e)=>Object.assign(Object.assign({},t),{entries:t.entries.concat(e.entry).slice(0,2),totalEntries:t.totalEntries+1})),Object(c.i)(j.l,(t,e)=>Object.assign(Object.assign({},t),{entries:t.entries.map((t,r)=>t.entryId===e.entry.entryId?e.entry:t)})),Object(c.i)(j.f,(t,e)=>Object.assign(Object.assign({},t),{entries:t.entries.filter(t=>t.entryId!==e.entryId),totalEntries:t.totalEntries-1})),Object(c.i)(j.b,(t,e)=>Object.assign(Object.assign({},t),{entries:t.entries.map((t,r)=>t.entryId===e.entryId?Object.assign(Object.assign({},t),{approved:!0}):t)})));function O(t,e){return y(t,e)}var g=r("zkoq"),E=r("XqQ8"),f=r("AytR"),v=r("Ht7O");let I=(()=>{class t{constructor(t,e,r,i,n,a){this.http=t,this.es=e,this.ru=r,this.rs=i,this.store=n,this.actions$=a,this.fetchentries$=Object(h.c)(()=>this.actions$.pipe(Object(h.d)(j.h),Object(E.a)(t=>this.http.get(f.a.BACKEND_URL+"api/getUserEntries/"+t.pageNumber+"/").pipe(Object(s.a)(t=>{if(t.entries.length>0)return t.entries.map(e=>({entryId:e.entryId,title:e.title,description:e.description,approved:e.approved,picture:e.picture,creator:e.creator,totalEntries:t.totalEntries}))}))),Object(s.a)(t=>j.j({entries:t,totalEntries:t[0].totalEntries})))),this.fetchAllentries$=Object(h.c)(()=>this.actions$.pipe(Object(h.d)(j.g),Object(E.a)(t=>this.http.get(f.a.BACKEND_URL+"api/getAllEntries/"+t.pageNumber+"/").pipe(Object(s.a)(t=>{if(t.entries.length>0)return t.entries.map(e=>({entryId:e.entryId,title:e.title,description:e.description,approved:e.approved,picture:e.picture,creator:e.creator,totalEntries:t.totalEntries}))}))),Object(s.a)(t=>j.j({entries:t,totalEntries:t[0].totalEntries})))),this.createEntry$=Object(h.c)(()=>this.actions$.pipe(Object(h.d)(j.c),Object(E.a)(t=>this.http.post(f.a.BACKEND_URL+"api/createEntry",t.entry)),Object(s.a)(t=>{t.entry&&this.ru.navigate(["../entry"],{relativeTo:this.rs})})),{dispatch:!1}),this.updateEntry$=Object(h.c)(()=>this.actions$.pipe(Object(h.d)(j.k),Object(E.a)(t=>this.http.post(f.a.BACKEND_URL+"api/updateEntry",t.entry).pipe(Object(s.a)(t=>({entryId:t.entry.entryId,title:t.entry.title,description:t.entry.description,approved:t.entry.approved,picture:t.entry.picture,creator:t.entry.creator})))),Object(s.a)(t=>{if(t)return j.l({entry:t})}))),this.deleteEntry$=Object(h.c)(()=>this.actions$.pipe(Object(h.d)(j.e),Object(E.a)(t=>(this.pno=t.pageNumber,this.trig=t.trigger,this.http.post(f.a.BACKEND_URL+"api/deleteEntry",{entryId:t.entryId}))),Object(s.a)(t=>{if(t.entryId)return this.ru.navigate(["../entry"],{relativeTo:this.rs}),this.trig?j.g({pageNumber:this.pno}):j.h({pageNumber:this.pno})}))),this.approveEntry$=Object(h.c)(()=>this.actions$.pipe(Object(h.d)(j.a),Object(E.a)(t=>this.http.post(f.a.BACKEND_URL+"api/approveEntry",{entryId:t.entryId})),Object(s.a)(t=>{if(t.entryId)return j.b({entryId:t.entryId})})))}}return t.\u0275fac=function(e){return new(e||t)(a.Xb(u.b),a.Xb(v.a),a.Xb(n.b),a.Xb(n.a),a.Xb(c.b),a.Xb(h.a))},t.\u0275prov=a.Kb({token:t,factory:t.\u0275fac}),t})();var m=r("kuTz"),N=r("dNgK"),$=r("TCkv");let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({providers:[p.a,{provide:u.a,useClass:m.a,multi:!0},{provide:u.a,useClass:$.a,multi:!0}],imports:[[d,i.p,i.g,u.c,g.b,N.b,c.d.forFeature("entry",O),h.b.forFeature([I])]]}),t})()}}]);